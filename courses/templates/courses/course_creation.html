{% extends "base.html" %} 
{% load static %} 

{% block title %}Create Course - Akili{% endblock title %}

{% block page_title %}Create a New Course{% endblock %}

{% block content %}
<div class="p-4 md:p-8 max-w-3xl mx-auto">
  
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-2">
      Create a New Course
    </h1>
    <p class="text-gray-600 dark:text-gray-400 text-lg">
      Select your target exam and subject to generate a personalized syllabus and study plan.
    </p>
  </div>

  <!-- Form Card -->
  <div class="card">
    {% if error %}
      <div class="mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
        <p class="text-sm text-red-700 dark:text-red-300">{{ error }}</p>
      </div>
    {% endif %}
    
    <form method="post" action="{% url 'courses:create_course' %}" class="space-y-6">
      {% csrf_token %}
      
      {% if form.non_field_errors %}
        <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
          <p class="text-sm text-red-700 dark:text-red-300">{{ form.non_field_errors }}</p>
        </div>
      {% endif %}

      <!-- Exam Type Field -->
      <div>
        <label for="{{ form.exam_type.id_for_label }}" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
          {{ form.exam_type.label }}
        </label>
        <select name="{{ form.exam_type.name }}" id="{{ form.exam_type.id_for_label }}" 
                class="input-field" required>
          <option value="">Select an exam type</option>
          {% for value, label in form.exam_type.field.choices %}
            {% if value %}
              <option value="{{ value }}" {% if form.exam_type.value == value %}selected{% endif %}>{{ label }}</option>
            {% endif %}
          {% endfor %}
        </select>
        {% if form.exam_type.help_text %}
          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">{{ form.exam_type.help_text }}</p>
        {% endif %}
        {% if form.exam_type.errors %}
          <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ form.exam_type.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Subject Field -->
      <div>
        <label for="{{ form.subject.id_for_label }}" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
          {{ form.subject.label }}
        </label>
        <select name="{{ form.subject.name }}" id="{{ form.subject.id_for_label }}" 
                class="input-field" required>
          <option value="">Select a subject</option>
          {% for value, label in form.subject.field.choices %}
            {% if value %}
              <option value="{{ value }}" {% if form.subject.value == value %}selected{% endif %}>{{ label }}</option>
            {% endif %}
          {% endfor %}
        </select>
        {% if form.subject.help_text %}
          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">{{ form.subject.help_text }}</p>
        {% endif %}
        {% if form.subject.errors %}
          <p class="mt-1 text-sm text-red-600 dark:text-red-400">{{ form.subject.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Action Buttons -->
      <div class="flex items-center space-x-3 pt-4">
        <button type="submit" class="btn-primary flex-1 md:flex-none">
          Generate My Course
        </button>
        
        <a href="{% url 'courses:course_list' %}" class="btn-secondary flex-1 md:flex-none">
          Cancel
        </a>
      </div>
    </form>
  </div>
  
</div>
{% endblock content %}